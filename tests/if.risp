" vim: set ft=lisp : "

(def test (import "./test.risp"))
(def assert (test assert))

(do
  (def result 0)
  (if 1
    (set result 1)
    (set result 2))
  (assert = 1 result))

(do
  (def result 0)
  (if 1
    (set result 1))
  (assert = 1 result))

(do
  (def result 0)
  (if 0
    (set result 1))
  (assert = 0 result))

(do
  (def result 0)
  (if "hello"
    (set result 1)
    (set result 2))
  (assert = 1 result))

(do
  (def result 0)
  (if ()
    (set result 1)
    (set result 2))
  (assert = 2 result))

(do
  (def result 0)
  (if (not ())
    (set result 1)
    (set result 2))
  (assert = 1 result))

(do
  (def result 0)
  (if (not (= 1 1))
    (set result 1)
    (set result 2))
  (assert = 2 result))

((test case)
 "number of arguments"
 (func ()
       (do
         (try-catch
           (func (err trace)
                 (assert = err (list "unmatched arguments" "`if` needs 2 or 3 arguments but got 1.")))

           (if 1)))

       (do
         (try-catch
           (func (err trace)
                 (assert = err (list "unmatched arguments" "`if` needs 2 or 3 arguments but got 4.")))

           (if 1 2 3 4)))))
